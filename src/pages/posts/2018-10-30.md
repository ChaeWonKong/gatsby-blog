---
title: "리팩토링은 개발자의 의무다"
date: "2018-10-30"
---

오늘은 개발자에게 리팩토링이 얼마나 중요한지에 대해서 알아본다. 리팩토링이란 짜여진 코드를 리뷰하며 로직을 간결하고 명료하게 하고, 불필요한 코드는 삭제하는 등 코드를 "클린(clean)"하게 만드는 작업을 말한다. 작가가 소설을 쓰면서 퇴고를 한다. 자신이 쓴 문장들을 읽고 또 읽으며 간결하고 효과적으로 다듬는다. 리팩토링은 "코드의 퇴고" 작업이다. 리팩토링을 통해 스파게티처럼 엉키고 설킨 복잡한 코드는 "클린 코드"로 변모한다.


### 리팩토링의 중요성
리팩토링은 1인 개발자와 협업하는 개발자 모두에게 중요하다. 혼자 개발을 하더라도, 자신이 6개월 전에 짠 코드를 보면 반드시 이해되지 않는 로직이 있다. 하물며 로직이 복잡하고 주먹구구식이면 그것을 이해하는 것은 불가능에 가깝다. 리팩토링을 하게 되면 이런 위험을 줄일 수 있다. 간결하고 명료한 코드는 시간이 흘러도 이해하기 쉽다.

협업에서 리팩토링을 통한 클린 코드를 작성하는 것은 더욱 중요하다. 코드가 '클린'하지 않으면, 동료들은 코드를 이해하기 힘들다. 이해할 수 있더라도 이해에 많은 시간이 걸린다. 코드는 술술 읽히는 판타지 소설이 아니다. 코드를 이해하기 위해서는 지적인 하드워킹을 통해 머리를 풀로 굴려야 한다. 코드의 내용을 해석하며 동시에 다른 사람이 짠 논리를 이해해야 한다. 클린 코드라도 다른 사람의 코드를 술술 읽는 것은 쉽지 않다.

하물며 코드가 스파게티처럼 엉켜 있다면 그것을 타인이 이해하는 것은 불가능에 가깝다. 이런 리팩토링되지 않은 코드는 유지보수성을 극도로 악화시키고 협업에 큰 장애요인이 된다.


### 리팩토링의 방법
- 반복되는 것은 변수나 함수를 선언하고, 모듈로 만들어 반복을 줄인다.
- 더 간결한 로직으로 구현할 수 있는지 고민하고 가장 간결한 로직을 찾는다.
- 시간복잡도나 메모리복잡도 등 성능이 낮은 알고리즘은 좀 더 효율적인 알고리즘으로 대체한다.
- 이해하기 어렵거나 직관적이지 않은 변수명은 직관적인 변수명으로 고친다.
  ```python
  my_value = 27

  # Refactoring: value라는 이해불가능한 단어보다는 보다 구체적인 단어를 사용
  my_age = 27
  ```
- 필요한 경우 주석을 단다.
- 절차지향적으로 짜여진 코드는 객체지향적으로 바꿔 재사용성을 높인다.
- 오프셋을 통한 인덱싱은 자제한다.
  ```python
  user_profile = ['Chaewon', 27]
  print(user_profile[0]) # 'Chaewon'을 출력하려는 경우

  # Dictionary를 사용해 인덱싱보다 직관적으로 'Chaewon'을 출력
  user_profile = {'name': 'Chaewon', 'age': 27}
  print(user_profile['name']) # 'Chaewon'을 출력하려는 경우
  ```

  ### 마침
  위대한 작가에 대한 찬사는 작가마다 제각각이지만 헤밍웨이에 대한 찬사는 리팩토링이라는 측면에서 특히 주목할 만하다.

  > 헤밍웨이는 두 단어로 표현할 수 있는 것에 결코 세 단어를 사용하지 않았다.

  헤밍웨이와 친구들은 술집에서 술을 마시다, 6개의 단어만으로 완결된 이야기를 지을 수 있는지 내기했다. 헤밍웨이는 10달러를 걸고 내기에 참여했다.

  "Baby shoes, for sale, never worn."
  단 여섯개의 단어만으로, 세상에서 가장 짧지만 슬픈 이야기가 탄생했다.
  
  아쉽지만 이 이야기는 픽션이다. 위키피디아에 따르면 실제 있었던 일은 아니라고 한다. 하지만 분명히 시사하는 바가 있다. 어떤 것을 표현하는 데에는 굳이 장황한 로직이 필요없다.

  헤밍웨이의 <노인과 바다>를 보면 얼마나 간결하게 인간의 삶을 담아내고 있는가에 놀라게 된다.
  
  우리의 코드도 그러해야 한다. 리팩토링을 통해, 헤밍웨이만큼 담백하면서도 기능의 정수를 꿰뚫는 훌륭한 코드로 우리의 코드를 변모시켜 보자.