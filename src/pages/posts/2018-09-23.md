---
title: "네트워크와 웹이란 무엇인가 2"
date: "2018-09-23"
---

앞선 글에서는 네트워크를 단순화하여 마치 세상에 하나의 서버와 하나의 클라이언트, 그리고 하나의 DNS 서버만 존재하는 듯 묘사했다. 그러나 현실은 언제나 이상보다는 훨씬 복잡한 법이다. 오늘은 네트워크의 중요한 구성요소인 라우터에 대해 알아본다. 오늘 공부할 내용은 네트워크의 하드웨어적 측면이라고 할 수도 있겠다. 

네트워크는 어떻게 구성되어 있을까? 네트워크는 중앙 집중적인가 지방 분권적인가? 내가 Naver 사이트에 접속할 때, 서버와 나(클라이언트)는 어떻게 데이터를 주고 받는 것일까? 어떤 경로를 통해 데이터는 흐르는 것인가?

오늘은 이런 주제들에 대해 답을 구해보도록 한다.

### 우리 곁에 존재하는 네트워크들
네트워크는 웹보다 훨씬 일찍부터 존재했던 개념이다. 결코 어느 날 갑자기 탄생한 개념이 아니다.

삼국지의 명장면을 꼽자면 단연코 관우가 죽음을 맞이하는 부분이 아닐까 한다. 삼국지를 읽는 독자라면 누구나 관우를 흠모하기 마련이다. 긍지 높고, 충성심이 강하며, 의로운 관우. 관우가 죽게된 것은 사실 네트워크가 제대로 작동하지 않아서였다.

적벽대전을 통해 형주를 얻은 유비와 제갈공명은 중요한 전략적 요충지인 형주를 관우에게 맡긴다. 관우는 형주의 여러 요충지에 봉화대를 축조하고 연락체계를 갖춘다. 하지만 육손은 꾀를 낸다. 첫 봉화대에서 불이 오르지 않으면 다른 봉화대는 결코 침략 사실을 모른다는 점에 착안, 봉화대를 하나하나 기습하여 봉화가 오르기도 전에 봉화대를 점령하는 식으로 차례차례 무력화해 나간다. 봉화가 오르지 않아 안심하고 있던 관우는 기습에 당황하고 결국 사로잡혀 죽음을 맞이한다.

봉화는 네트워크이다. 조선시대에는 전국 각지에 봉화대가 있어, 침략사실을 수도인 한양까지 알릴 수 있었다. 말을 달리는 파발보다 훨씬 빨리 위험 신호를 보낼 수 있음은 물론이다. 봉화를 이렇게 자세히 설명하는 것은, 봉화가 현재 웹이 사용하는 네트워크와 라우터를 신기하게도 닮았기 때문이다.

먼저 봉화는 2진법 즉 컴퓨터의 연산과 유사하다. 봉화대가 4개 연이어 있다면 끄고 켤 수 있는 경우의 수는 2^4, 즉 16가지이다. 봉화는 끄거나 켬으로써 신호를 전달하는데, 이는 컴퓨터의 비트와 상응한다.

두번째로 봉화는 네트워크의 성질을 가진다. 부산에 적군이 침략을 하였을 때, 봉화를 올린다 하여도 서울에서 바로 알 방법은 없다. 봉화는 일정 거리가 지나면 보이지 않는다. 따라서 부산에서 서울까지 일정 간격으로 봉화대를 설치하고, 한 봉화가 다음 봉화에게 신호를 보내는 식으로 작동할 수밖에 없다. 이는 네트워크의 라우터를 닮았다.

서울에 있는 왕 입장에서는 부산만 걱정되는 것이 아니다. 함경도도 걱정이 되고, 제주도도 걱정이 된다. 전국 각지에 봉화를 설치하게 되면, 이제는 그물망처럼 얽힌 봉화대들에서 최단거리로, 최단시간에 어느 지역에 무슨 일이 발생했는가를 전달할 수 있는 소위 '최단거리 알고리즘'이 필요해진다. 이 또한 라우터와 닮았다.

예를들어, 부산에서 서울까지 봉화를 올릴 때, 대전을 거칠수도, 세종시를 거칠수도 있다고 하자. 그렇다면 더 효율적으로 서울에 당도할 수 있는 봉화대 쪽으로 신호를 연결해야 할 것이다.

### 라우터
라우터는 인터넷 세계의 봉화다. 우리가 Naver에 접속하면, 우리로부터 출발한 GET Request는 라우터로 향한다. 각 라우터의 역할은 목적지를 확인하고, 목적지까지 되도록 최단거리로 도달할 수 있도록 다음 라우터를 연결해준다. 이렇게 라우터에서 라우터로, 라우터에서 라우터로 신호는 이동한다. 한 라우터가 목적지까지 바로 연결해 주는 것이 아니다. 서울에서 부산을 가는 과정에 여러 고속도로가 있는 것처럼, 경로는 여러가지이다. 

라우터는 다음 라우터에게 연결하며 데이터가 목적지까지 흐르도록 한다.